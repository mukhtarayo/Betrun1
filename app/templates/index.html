<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Betrun — Football Analyzer</title>
  <link rel="stylesheet" href="/static/style.css"/>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#0b0c10; color:#e5e7eb; }
    header { padding:16px 20px; display:flex; align-items:center; justify-content:space-between; background:#111319; border-bottom:1px solid #1f2430; position:sticky; top:0; z-index:5; }
    .brand { font-weight:800; letter-spacing:.3px; font-size:18px; color:#58a6ff; }
    main { max-width:1100px; margin:20px auto; padding:0 16px 40px; }
    h2 { margin:24px 0 10px; font-size:18px; color:#cbd5e1; }
    .row { display:grid; gap:16px; grid-template-columns: 1fr 1fr; }
    .card { background:#111319; border:1px solid #1f2430; border-radius:12px; padding:16px; }
    .grid-2 { display:grid; gap:12px; grid-template-columns:1fr 1fr; }
    .grid-3 { display:grid; gap:12px; grid-template-columns:1fr 1fr 1fr; }
    label { font-size:12px; color:#9aa4b2; display:block; margin-bottom:6px; }
    input, select { background:#0d0f15; border:1px solid #1f2430; color:#e5e7eb; padding:8px 10px; border-radius:8px; width:100%; }
    input[type="checkbox"] { width:auto; }
    small { color:#94a3b8; }
    button { background:#2563eb; color:white; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    .btn-row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    table { width:100%; border-collapse:collapse; font-size:14px; }
    th, td { border-bottom:1px dashed #212839; padding:8px; text-align:left; }
    thead th { color:#9aa4b2; font-weight:600; }
    .muted { color:#9aa4b2; }
    .badge { font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid #1f2430; }
    .good { background:#0c3b17; color:#86efac; border-color:#14532d; }
    .warn { background:#3b2f0c; color:#fde68a; border-color:#854d0e; }
    .bad { background:#3b0c0c; color:#fca5a5; border-color:#7f1d1d; }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; background:#0d0f15; border:1px solid #1f2430; padding:2px 6px; border-radius:6px; }
    .note { font-size:12px; color:#9aa4b2; }
    .pill { background:#0d0f15; border:1px solid #1f2430; padding:4px 8px; border-radius:999px; font-size:12px; color:#cbd5e1; }
    .actions { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .table-wrap { overflow:auto; }
    .bookmaker { font-size:12px; color:#93c5fd; font-weight:700; }
    footer { margin-top:32px; color:#64748b; font-size:12px; text-align:center; }
  </style>
</head>
<body>
  <header>
    <div class="brand">Betrun</div>
    <div class="actions">
      <span class="pill" id="envStatus">env: …</span>
      <button id="btnHealth">Health</button>
      <button id="btnEnv">Env</button>
    </div>
  </header>

  <main>
    <div class="row">
      <div class="card">
        <h2>Get Matches + Odds (API-FOOTBALL)</h2>
        <div class="grid-3">
          <div>
            <label>League ID (e.g. EPL=39)</label>
            <input id="fxLeague" placeholder="39"/>
          </div>
          <div>
            <label>Season</label>
            <input id="fxSeason" placeholder="2025" value="2025"/>
          </div>
          <div>
            <label>Date (YYYY-MM-DD) <small class="muted">(optional)</small></label>
            <input id="fxDate" placeholder="2025-09-21"/>
          </div>
        </div>
        <div class="btn-row" style="margin-top:10px;">
          <button id="btnGetMatches">Get Matches</button>
          <small class="note">Uses <span class="kbd">/api/matches</span> → fixtures + Bet365 odds when available.</small>
        </div>
        <div id="matchesWrap" class="table-wrap" style="margin-top:14px;"></div>
      </div>

      <div class="card">
        <h2>Analyze a Match</h2>
        <div class="grid-2">
          <div>
            <label>League (label or code)</label>
            <input id="league" placeholder="EPL"/>
          </div>
          <div>
            <label>Season</label>
            <input id="season" value="2025"/>
          </div>
          <div>
            <label>Home</label>
            <input id="home" placeholder="Fulham"/>
          </div>
          <div>
            <label>Away</label>
            <input id="away" placeholder="Brentford"/>
          </div>
          <div>
            <label>Odds 1</label>
            <input id="odds1" placeholder="1.95"/>
          </div>
          <div>
            <label>Odds X</label>
            <input id="oddsX" placeholder="3.40"/>
          </div>
          <div>
            <label>Odds 2</label>
            <input id="odds2" placeholder="3.45"/>
          </div>
          <div>
            <label>Derby?</label>
            <div style="display:flex;align-items:center;gap:8px;">
              <input type="checkbox" id="derby"/><span class="muted">boosts rho and both λ slightly</span>
            </div>
          </div>
        </div>

        <div class="grid-3" style="margin-top:10px;">
          <div>
            <label>O/U lines</label>
            <input id="ouLines" value="1.5,2.5,3.5"/>
          </div>
          <div>
            <label>Home TG lines</label>
            <input id="homeTG" value="0.5,1.5"/>
          </div>
          <div>
            <label>Away TG lines</label>
            <input id="awayTG" value="0.5,1.5"/>
          </div>
        </div>

        <div style="margin-top:10px;">
          <label>Correct Score groups <small class="muted">a:b,a:b,a:b</small></label>
          <input id="csGroups" value="1:0,2:0,2:1"/>
        </div>

        <div style="margin-top:12px;">
          <label>Markets</label>
          <div class="actions" style="gap:10px;flex-wrap:wrap;">
            <label><input type="checkbox" class="mk" value="1X2" checked/> 1X2</label>
            <label><input type="checkbox" class="mk" value="Double Chance" checked/> Double Chance</label>
            <label><input type="checkbox" class="mk" value="Draw No Bet" checked/> DNB</label>
            <label><input type="checkbox" class="mk" value="Over/Under" checked/> O/U</label>
            <label><input type="checkbox" class="mk" value="BTTS" checked/> BTTS</label>
            <label><input type="checkbox" class="mk" value="Team Goals" checked/> Team Goals</label>
            <label><input type="checkbox" class="mk" value="1X2 + O/U" checked/> 1X2 + O/U</label>
            <label><input type="checkbox" class="mk" value="DC + BTTS" checked/> DC + BTTS</label>
            <label><input type="checkbox" class="mk" value="Result + BTTS" checked/> Result + BTTS</label>
            <label><input type="checkbox" class="mk" value="Correct Score" checked/> Correct Score</label>
            <label><input type="checkbox" class="mk" value="Clean Sheet" checked/> Clean Sheet</label>
            <label><input type="checkbox" class="mk" value="Win to Nil" checked/> Win to Nil</label>
            <label><input type="checkbox" class="mk" value="Winning Margin" checked/> Winning Margin</label>
          </div>
        </div>

        <div class="btn-row" style="margin-top:12px;">
          <button id="btnAnalyze">Analyze</button>
          <button id="btnEnv">Check Env</button>
          <small class="note">Posts to <span class="kbd">/analyze/football</span>.</small>
        </div>
      </div>
    </div>

    <div class="row" style="margin-top:18px;">
      <div class="card">
        <h2>Debug: API helpers</h2>
        <div class="grid-3">
          <div>
            <label>Team search</label>
            <div class="actions">
              <input id="dbgTeamName" placeholder="man city / fc kopenhavn / club brugge"/>
              <button id="btnDbgTeam">Search</button>
            </div>
            <pre id="dbgTeamOut" class="note" style="white-space:pre-wrap;margin-top:8px;"></pre>
          </div>
          <div>
            <label>Fixtures</label>
            <div class="actions">
              <input id="dbgLeague" placeholder="league id"/>
              <input id="dbgSeason" placeholder="season" value="2025" style="max-width:100px;"/>
              <button id="btnDbgFixtures">Fetch</button>
            </div>
            <pre id="dbgFixturesOut" class="note" style="white-space:pre-wrap;margin-top:8px;max-height:180px;overflow:auto;"></pre>
          </div>
          <div>
            <label>H2H</label>
            <div class="actions">
              <input id="dbgH" placeholder="home id"/>
              <input id="dbgA" placeholder="away id"/>
              <button id="btnDbgH2H">Fetch</button>
            </div>
            <pre id="dbgH2HOut" class="note" style="white-space:pre-wrap;margin-top:8px;max-height:180px;overflow:auto;"></pre>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Output</h2>
        <div id="output"></div>
      </div>
    </div>

    <footer>© Betrun — API-FOOTBALL powered</footer>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
